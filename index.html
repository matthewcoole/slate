
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;,&quot;shell&quot;,&quot;ruby&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#creating-a-corpus" class="toc-h1 toc-link" data-title="Creating a Corpus">Creating a Corpus</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#creating-a-table" class="toc-h2 toc-link" data-title="Creating a Corpus">Creating a Table</a>
                  </li>
                  <li>
                    <a href="#inserting-data" class="toc-h2 toc-link" data-title="Creating a Corpus">Inserting Data</a>
                  </li>
                  <li>
                    <a href="#multiple-inserts" class="toc-h2 toc-link" data-title="Creating a Corpus">Multiple inserts</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#querying" class="toc-h1 toc-link" data-title="Querying">Querying</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-usage" class="toc-h2 toc-link" data-title="Querying">API Usage</a>
                  </li>
                  <li>
                    <a href="#command-line" class="toc-h2 toc-link" data-title="Querying">Command Line</a>
                  </li>
                  <li>
                    <a href="#simple-queries" class="toc-h2 toc-link" data-title="Querying">Simple Queries</a>
                  </li>
                  <li>
                    <a href="#phrases" class="toc-h2 toc-link" data-title="Querying">Phrases</a>
                  </li>
                  <li>
                    <a href="#regular-expressions" class="toc-h2 toc-link" data-title="Querying">Regular Expressions</a>
                  </li>
                  <li>
                    <a href="#joins" class="toc-h2 toc-link" data-title="Querying">Joins</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#result-types" class="toc-h1 toc-link" data-title="Result Types">Result Types</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#kwic" class="toc-h2 toc-link" data-title="Result Types">KWIC</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#hidden-query-properties" class="toc-h1 toc-link" data-title="Hidden Query Properties">Hidden Query Properties</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#relative-position" class="toc-h2 toc-link" data-title="Hidden Query Properties">Relative Position</a>
                  </li>
                  <li>
                    <a href="#range-values" class="toc-h2 toc-link" data-title="Hidden Query Properties">Range Values</a>
                  </li>
                  <li>
                    <a href="#distribute" class="toc-h2 toc-link" data-title="Hidden Query Properties">Distribute</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='creating-a-corpus'>Creating a Corpus</h1><h2 id='creating-a-table'>Creating a Table</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/mycorpus/create</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tokens"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZIPFIAN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"indexed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"columns"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token"</span><span class="p">}]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A corpus is created automatically when you create a new table. To create a table simply send a <code>POST</code> request to the path you would like your new corpus to have along with a JSON table description to create your first table. </p>

<p>For example to create a corpus named <code>mycorpus</code> just <code>POST</code> a JSON table description to the URL <a href="http://localhost:1189/mycorpus/create">http://localhost:1189/mycorpus/create</a> .</p>

<p>The JSON table description defines both the columns &amp; column sets in the table;</p>

<p>This will create a table named <code>tokens</code> containing a single column set and a single column named <code>token</code>. The <code>type</code> property specifies that the data in the column set is zipfian in nature and the <code>&quot;indexed&quot;: true</code> ensures an index is built on the column set.</p>
<h2 id='inserting-data'>Inserting Data</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/mycorpus/tokens/insert</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">text/csv</span>

token
The
quick
brown
fox
jumped
over
the
lazy
dog
.
</code></pre>
<p>Once you have created a table inserting data can be done by <code>POST</code>ing a <code>*.tsv</code> or <code>*.csv</code> file to the path of your destination table. Using our earlier example to add some data to our corpus we would post a file to; <a href="http://localhost:1189/mycorpus/tokens">http://localhost:1189/mycorpus/tokens</a> .</p>

<p>It is important that the contents of the <code>*.tsv</code> or <code>*.csv</code> contains a header line where the headers match precisely the names of the columns in the table you are trying to insert into (although the ordering of the columns is unimportant).</p>
<h2 id='multiple-inserts'>Multiple inserts</h2>
<p>When inserting data to lexiDB the database will automatically commit everything in the transferred CSV/TSV file and index it. To insert multiple CSV/TSV files you must include the query param <code>commit=false</code>. This will prevent lexiDB from indexing so you can insert multiple files into the same table. When inserting the final file simply remove the query param or use <code>commit=true</code></p>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/mycorpus/tokens/insert?commit=false</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">text/csv</span>

token
The
quick
brown
fox
</code></pre><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/mycorpus/tokens/insert?commit=true</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">text/csv</span>

token
jumped
over
the
lazy
dog
.
</code></pre><h1 id='querying'>Querying</h1><h2 id='api-usage'>API Usage</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"pos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADJ"</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kwic"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl localhost:1189/mycorpus/query
  -X GET
  -H <span class="s2">"Content-Type: application/json"</span>
  -d <span class="s2">"</span><span class="nv">$JSON</span><span class="s2">"</span>

<span class="o">{</span>
  <span class="s2">"query"</span>: <span class="o">{</span>
    <span class="s2">"tokens"</span>:[
      <span class="o">{</span><span class="s2">"pos"</span>: <span class="s2">"ADJ"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">"result"</span>: <span class="o">{</span><span class="s2">"type"</span>: <span class="s2">"kwic"</span><span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>A <code>GET</code> request can be made to the endpoint <a href="http://localhost:1189/api/query">http://localhost:1189/sample/query</a>. The body of the request should be in the form of a JSON query.</p>

<p>This will send a <code>query</code> request to the <code>sample</code> corpus.</p>
<h2 id='command-line'>Command Line</h2>
<p>Requests can be made from the command line using <code>curl</code>.</p>

<p><em>Review <a href="https://curl.haxx.se/docs/">cURL documentation</a> for more info.</em></p>
<h2 id='simple-queries'>Simple Queries</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"pos"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADJ"</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kwic"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl localhost:1189/mycorpus/query
  -X GET
  -H <span class="s2">"Content-Type: application/json"</span>
  -d <span class="s2">"</span><span class="nv">$JSON</span><span class="s2">"</span>

<span class="o">{</span>
  <span class="s2">"query"</span>: <span class="o">{</span>
    <span class="s2">"tokens"</span>:[
      <span class="o">{</span><span class="s2">"pos"</span>: <span class="s2">"ADJ"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">"result"</span>: <span class="o">{</span><span class="s2">"type"</span>: <span class="s2">"kwic"</span><span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>To query use the QBE (Query By Example) JSON syntax. This will query the <code>&quot;tokens&quot;</code> table and the <code>&quot;pos&quot;</code> (part-of-speech) column for the value <code>&quot;ADJ&quot;</code> and return the results in the form of a <code>&quot;kwic&quot;</code> (keyword in context).</p>
<h2 id='phrases'>Phrases</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"out"</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"of"</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"time"</span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kwic"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl localhost:1189/mycorpus/query
  -X GET
  -H <span class="s2">"Content-Type: application/json"</span>
  -d <span class="s2">"</span><span class="nv">$JSON</span><span class="s2">"</span>

<span class="o">{</span>
  <span class="s2">"query"</span>: <span class="o">{</span>
    <span class="s2">"tokens"</span>:[
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"out"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"of"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"time"</span><span class="o">}</span>,
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">"result"</span>: <span class="o">{</span><span class="s2">"type"</span>: <span class="s2">"kwic"</span><span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>A sequence of tokens or phrase can be searched for by specifying additional objects in the query array example for a given table e.g. to query for the phrase &quot;out of time&quot; as it appears in its original form.</p>
<h2 id='regular-expressions'>Regular Expressions</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"star.*"</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kwic"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl localhost:1189/mycorpus/query
  -X GET
  -H <span class="s2">"Content-Type: application/json"</span>
  -d <span class="s2">"</span><span class="nv">$JSON</span><span class="s2">"</span>

<span class="o">{</span>
  <span class="s2">"query"</span>: <span class="o">{</span>
    <span class="s2">"tokens"</span>:[
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"star.*"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">"result"</span>: <span class="o">{</span><span class="s2">"type"</span>: <span class="s2">"kwic"</span><span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>LexiDB incorporates <a href="http://www.brics.dk/automaton/">dk.brics.automaton</a> for resolving regular expressions.</p>

<p>Values within queries can be expressed as regular expressions (using the <a href="http://www.brics.dk/automaton/doc/index.html?dk/brics/automaton/RegExp.html">automaton syntax</a>);</p>

<p>This example query would match against any of <code>star</code>, <code>staring</code>, <code>starred</code>, <code>start</code>, <code>starting</code> etc.</p>
<h2 id='joins'>Joins</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"texts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"join"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tid"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To perform a join (inner-join) simply add two QBE queries to the <code>query</code> element (in this case querying the <code>tokens</code> and <code>texts</code> table) and specify which column on which to join in the <code>result</code> element; <code>&quot;join&quot;: &quot;tid&quot;</code>.  </p>
<h1 id='result-types'>Result Types</h1>
<p>There are 4 primary result types supported;</p>

<table><thead>
<tr>
<th>ID</th>
<th>Description</th>
<th>Params</th>
</tr>
</thead><tbody>
<tr>
<td>kwic</td>
<td>Keyword-in-Context - The results of the query will be returned as a set of concordance lines.</td>
<td>context</td>
</tr>
<tr>
<td>col</td>
<td>Collocation - Returns a statistics frame of the terms surrounding the query.</td>
<td>context</td>
</tr>
<tr>
<td>ngram</td>
<td>NGram - Builds a frequency list of the Ngrams that contain the query term.</td>
<td>n</td>
</tr>
<tr>
<td>list</td>
<td>Frequency List - Generates a frequency list of terms that match the query.</td>
<td></td>
</tr>
</tbody></table>

<p>All results are automatically paged with details of the page provided in the resulting JSON object.</p>
<h2 id='kwic'>KWIC</h2><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"concordances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"but"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fell"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"to"</span><span class="p">},</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="p">[{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"big"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I"</span><span class="p">},</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="p">[{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"and"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"an"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sat"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on"</span><span class="p">},</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="p">[{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">","</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">","</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pear"</span><span class="p">},</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="p">[{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"poison"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"caused"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"her"</span><span class="p">},</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"page"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pages"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resultsPerPage"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>KWIC (Keyword-in-Context) queries return their results as a list of concordance lines.</p>
<h1 id='hidden-query-properties'>Hidden Query Properties</h1><h2 id='relative-position'>Relative Position</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"out"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"of"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"time"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kwic"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl localhost:1189/mycorpus/query
  -X GET
  -H <span class="s2">"Content-Type: application/json"</span>
  -d <span class="s2">"</span><span class="nv">$JSON</span><span class="s2">"</span>

<span class="o">{</span>
  <span class="s2">"query"</span>: <span class="o">{</span>
    <span class="s2">"tokens"</span>:[
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"out"</span>, <span class="s2">"rp"</span>: <span class="s2">"0"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"of"</span>, <span class="s2">"rp"</span>: <span class="s2">"1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"time"</span>, <span class="s2">"rp"</span>: <span class="s2">"2"</span><span class="o">}</span>,
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">"result"</span>: <span class="o">{</span><span class="s2">"type"</span>: <span class="s2">"kwic"</span><span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>Many objects in the query syntax have properties that default to particular values if omitted from the query. For example, the QBE array specified for a table contains the hidden property; relative position <code>&quot;rp&quot;</code> which defaults to a sequential increment within the array i.e. the previous query would have the relative position properties default to;</p>
<h2 id='range-values'>Range Values</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rabbit"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-2 to 2"</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kwic"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl localhost:1189/mycorpus/query
  -X GET
  -H <span class="s2">"Content-Type: application/json"</span>
  -d <span class="s2">"</span><span class="nv">$JSON</span><span class="s2">"</span>

<span class="o">{</span>
  <span class="s2">"query"</span>: <span class="o">{</span>
    <span class="s2">"tokens"</span>:[
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"white"</span>, <span class="s2">"rp"</span>: <span class="s2">"0"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"rabbit"</span>, <span class="s2">"rp"</span>: <span class="s2">"-2 to 2"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">"result"</span>: <span class="o">{</span><span class="s2">"type"</span>: <span class="s2">"kwic"</span><span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>Some properties such as relative position can be specified as individual values, a list of values or in some cases a range;</p>

<p>This query would search for the string &quot;white&quot; in its original form in the tokens table and the string &quot;rabbit&quot; in its original form up to 2 positions before or after. </p>

<p>The same query could be expressed less elegantly using a list of values; <code>{&quot;token&quot;: &quot;rabbit&quot;, &quot;rp&quot;: &quot;-2, -1, 0, 1, 2&quot;}</code>. Obviously here the position 0 is superfluous as it would be in the same position as the previous token but this kind of thing can still be done if you were searching on another column.</p>
<h2 id='distribute'>Distribute</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/mycorpus/query</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost:1189</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tokens"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apple.*"</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kwic"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"dist"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl localhost:1189/mycorpus/query
  -X GET
  -H <span class="s2">"Content-Type: application/json"</span>
  -d <span class="s2">"</span><span class="nv">$JSON</span><span class="s2">"</span>

<span class="o">{</span>
  <span class="s2">"query"</span>: <span class="o">{</span>
    <span class="s2">"tokens"</span>:[
      <span class="o">{</span><span class="s2">"token"</span>: <span class="s2">"apple.*"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">"result"</span>: <span class="o">{</span><span class="s2">"type"</span>: <span class="s2">"kwic"</span><span class="o">}</span>,
  <span class="s2">"dist"</span>: <span class="nb">false</span>
<span class="o">}</span>
</code></pre>
<p>When lexiDB is deployed in a cluster queries will automatically be distributed to all nodes in the cluster and the results aggregated and returned by the original endpoint the query was sent to. This behavior is caused by the default hidden query param; distribute <code>dist</code>. This param will default to true. If you would like to see the results returned by just a single node simply send a query to that nodes endpoint setting the <code>dist</code> param to <code>false</code>;</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
